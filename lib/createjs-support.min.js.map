{"version":3,"sources":["../src/util/Logger.ts","../src/util/Num.ts","../src/util/CommandUtil.ts","../src/util/AnimateUtil.ts","../src/util/Boxer.ts","../src/job/Timer.ts","../src/event/TimerEvent.ts","../src/job/KeyWatcher.ts","../src/event/KeyWatcherEvent.ts","../src/var/KeyCode.ts","../src/job/ResizeWatcher.ts","../src/event/ResizeWatcherEvent.ts","../src/job/ScrollWatcher.ts","../src/event/ScrollWatcherEvent.ts","../src/job/AssetLoader.ts","../src/event/AssetLoaderEvent.ts","../src/view/View.ts"],"names":["trace","messages","_i","arguments","length","alm","Logger","apply","caller","throwWarn","target","message","condition","warn","throwError","error","Num","map","value","srcMin","srcMax","dstMin","dstMax","random","min","max","Math","PI","PI2","PI_2","PI_3","PI_4","PI_6","RAD2DEG","DEG2RAD","CommandUtil","stop","command","interrupt","fadeTo","opacity","duration","easing","execute","tween","cmd","Tween","alpha","visible","fadeIn","fadeOut","AnimateUtil","getLinkageMovieClip","linkageId","window","getChildByName","parent","childName","Align","ScaleMode","Boxer","resize","bounds","scaleMode","align","ShowAll","Middle_Center","tx","x","ty","y","tw","width","th","height","bx","by","bw","bh","NoBorder","ratioW","ratioH","ratio","ExactFit","createjs","Rectangle","Top_Left","Middle_Left","Bottom_Left","Top_Right","Middle_Right","Bottom_Right","Top_Center","Bottom_Center","LoggerLevel","verbose","level","Verbose","console","log","Array","prototype","slice","call","Trace","Warn","Error","Timer","_super","interval","repeatCount","_this","this","timerHandler","tStartTime","getCurrentTime","elapsedCount","isCompleted","tInterval","startInterval","dispatch","TimerEvent","TICK","COMPLETE","isRunning","tId","reset","__extends","start","tRestTime","stopInterval","restart","Date","valueOf","setInterval","clearInterval","eventType","dispatchEvent","getRestCount","getIsRunning","getInterval","getElapsedTime","getRestTime","getElapsedCount","getRepeatCount","setRepeatCount","count","EventDispatcher","bubbles","cancelable","restCount","clone","type","toString","Event","KeyWatcher","initialize","isInitialized","eventDispatcher","$window","jQuery","on","windowKeyDownHandler","windowKeyUpHandler","off","addEventListener","listener","useCapture","removeEventListener","getIsAnyKeyPressed","pressedKeyCount","getIsKeyPressed","keyCode","isKeyPressedByKeyCode","event","KeyWatcherEvent","KEY_DOWN","KEY_UP","jqueryEvent","key","altKey","ctrlKey","shiftKey","KeyCode","ResizeWatcher","windowResizeHandler","stageWidth","stageHeight","$body","contentWidth","contentHeight","getStageWidth","getStageHeight","getContentWidth","getContentHeight","ResizeWatcherEvent","RESIZE","ScrollWatcher","windowScrollHandler","windowHeight","scrollTop","scrollBottom","calcScrolledPosition","calcScrolledPositionRatio","getScrollTop","getScrollBottom","getWindowHeight","ScrollWatcherEvent","SCROLL","AssetLoader","isLoading","isLoaded","isCanceled","loader","LoadQueue","windowImages","load","setListener","addFile","filePath","id","loadFile","src","addFiles","files","loadManifest","addManifest","jsonPath","addAnimateAsset","basePath","getAnimateManifest","cancel","close","clear","clearListener","destroy","getResult","idOrPath","loaderFileLoadHandler","loaderFileErrorHandler","loaderProgressHandler","loaderErrorHandler","loaderCompleteHandler","manifest","substr","updated","numFiles","file","i","push","getIsLoading","getIsLoaded","getIsCanceled","itemId","item","result","AssetLoaderEvent","FILE_LOAD","progress","loaded","total","title","ERROR","PROGRESS","FILE_ERROR","loadedCount","totalCount","content","View","view","isInitializing","isReady","isShowing","isShown","isHiding","autoHideWithInit","name","implInitialize","hide","ready","implReady","finalize","implFinalize","show","useTransition","getShowCommand","getHideCommand","Serial","addCommand","Func","hideCommand","showCommand","insertCommand","implShow","implHide","getIsInitializing","getIsInitialized","getIsReady","getIsShowing","getIsShown","getIsHiding","getIsHidden","getView","getAutoHideWithInit","setAutoHideWithInit","getName","setName"],"mappings":"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","file":"createjs-support.min.js","sourcesContent":["/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport enum LoggerLevel {\n\t\tVerbose = 0,\n\t\tTrace = 1,\n\t\tWarn = 2,\n\t\tError = 3,\n\t\tSilent = 4,\n\t}\n\n\texport class Logger {\n\n\t\tpublic static level: number = LoggerLevel.Verbose;\n\n\t\tpublic static verbose(...messages:any[]): void {\n\t\t\tif (Logger.level <= LoggerLevel.Verbose) console.log.apply(console, Array.prototype.slice.call(messages));\n\t\t}\n\n\t\tpublic static trace(...messages:any[]): void {\n\t\t\tif (Logger.level <= LoggerLevel.Trace) console.log.apply(console, Array.prototype.slice.call(messages));\n\t\t}\n\n\t\tpublic static warn(target:any, message:string, condition:boolean = true): void {\n\t\t\tif (Logger.level <= LoggerLevel.Warn && condition) {\n\t\t\t\ttrace(\"[WARNING] \" + message + \" : \", target);\n\t\t\t}\n\t\t}\n\n\t\tpublic static error(target:any, message: string, condition:boolean = true): void {\n\t\t\tif (Logger.level <= LoggerLevel.Error && condition) {\n\t\t\t\ttrace(target);\n\t\t\t\tthrow new Error(\"[ERROR] \" + message);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction trace(...messages:any[]):void {\n\talm.Logger.trace.apply(trace.caller, arguments);\n}\n\nfunction throwWarn(target:any, message:string, condition:boolean = true):void {\n\talm.Logger.warn.apply(null, arguments);\n}\n\nfunction throwError(target:any, message:string, condition:boolean = true):void {\n\talm.Logger.error.apply(null, arguments);\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class Num {\n\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number):number {\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (srcMin < srcMax) {\n\t\t\t\tvalue = value < srcMin ? srcMin : value > srcMax ? srcMax : value;\n\t\t\t} else {\n\t\t\t\tvalue = value < srcMax ? srcMax : value > srcMin ? srcMin : value;\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\tpublic static random(min:number = 0, max:number = 1):number {\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI:number = Math.PI;\n\t\tpublic static PI2:number = Num.PI * 2;\n\t\tpublic static PI_2:number = Num.PI / 2;\n\t\tpublic static PI_3:number = Num.PI / 3;\n\t\tpublic static PI_4:number = Num.PI / 4;\n\t\tpublic static PI_6:number = Num.PI / 6;\n\n\t\tpublic static RAD2DEG:number = 180 / Num.PI;\n\t\tpublic static DEG2RAD:number = Num.PI / 180;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:cmd.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static fadeTo(target:createjs.DisplayObject, opacity:number, duration:number, easing:cmd.EasingFunction, execute:boolean = true):cmd.Tween {\n\t\t\tconst tween:cmd.Tween = new cmd.Tween(target, { alpha: opacity }, null, duration, easing, ():void => {\n\t\t\t\tif (opacity > 0) target.visible = true;\n\t\t\t}, null, ():void => {\n\t\t\t\tif (opacity <= 0) target.visible = false;\n\t\t\t});\n\t\t\tif (execute) tween.execute();\n\t\t\treturn tween;\n\t\t}\n\n\t\tpublic static fadeIn(target:createjs.DisplayObject, duration:number, easing:cmd.EasingFunction, execute:boolean = true):cmd.Tween {\n\t\t\treturn CommandUtil.fadeTo(target, 1, duration, easing, execute);\n\t\t}\n\n\t\tpublic static fadeOut(target:createjs.DisplayObject, duration:number, easing:cmd.EasingFunction, execute:boolean = true):cmd.Tween {\n\t\t\treturn CommandUtil.fadeTo(target, 0, duration, easing, execute);\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class AnimateUtil {\n\n\t\tpublic static getLinkageMovieClip(linkageId:string):createjs.MovieClip {\n\t\t\treturn new window[\"lib\"][linkageId]();\n\t\t}\n\n\t\tpublic static getChildByName(parent:createjs.Container, childName:string):createjs.DisplayObject {\n\t\t\treturn <createjs.DisplayObject>parent[childName];\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:createjs.Rectangle, bounds:createjs.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):createjs.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new createjs.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left    || align == Align.Middle_Left    || align == Align.Bottom_Left  ) ? 0 :\n\t\t\t           (align == Align.Top_Right   || align == Align.Middle_Right   || align == Align.Bottom_Right ) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left    || align == Align.Top_Center     || align == Align.Top_Right    ) ? 0 :\n\t\t\t           (align == Align.Bottom_Left || align == Align.Bottom_Center  || align == Align.Bottom_Right ) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new createjs.Rectangle(tx, ty, tw, th);\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class Timer extends createjs.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, false, false, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class TimerEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = \"tick\";\n\t\tpublic static COMPLETE:string = \"complete\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():TimerEvent {\n\t\t\treturn new TimerEvent(this.type, this.bubbles, this.cancelable, this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[TimerEvent (type=\" + this.type + \" elapsedCount=\" + this.elapsedCount + \" repeatCount=\" + this.repeatCount + \" restCount=\" + this.restCount + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate constructor() {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[KeyWatcher] start\");\n\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\t$window.on(\"keydown\", this.windowKeyDownHandler);\n\t\t\t$window.on(\"keyup\", this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[KeyWatcher] stop\");\n\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\t$window.off(\"keydown\", this.windowKeyDownHandler);\n\t\t\t$window.off(\"keyup\", this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:JQueryKeyEventObject):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, false, false, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:JQueryKeyEventObject):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, false, false, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:Hash<boolean> = {};\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class KeyWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = \"keyUp\";\n\t\tstatic KEY_DOWN:string = \"keyDown\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryKeyEventObject = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t\tthis.key = this.jqueryEvent.key;\n\t\t\tthis.keyCode = this.jqueryEvent.keyCode;\n\t\t\tthis.altKey = this.jqueryEvent.altKey;\n\t\t\tthis.ctrlKey = this.jqueryEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.jqueryEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[KeyWatcherEvent (type=\" + this.type + \" key=\" + this.key + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryKeyEventObject;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\n// Original\n// https://github.com/nfriend/ts-keycode-enum\n// License MIT\n\nnamespace alm {\n\n\texport enum KeyCode {\n\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ResizeWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate constructor() {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[ResizeWatcher] start\");\n\n\t\t\tjQuery(window).on(\"resize\", this.windowResizeHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[ResizeWatcher] stop\");\n\n\t\t\tjQuery(window).off(\"resize\", this.windowResizeHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\tResizeWatcher.stageWidth = $window.width();\n\t\t\tResizeWatcher.stageHeight = $window.height();\n\n\t\t\tconst $body:JQuery = jQuery(\"body\");\n\t\t\tResizeWatcher.contentWidth = $body.width();\n\t\t\tResizeWatcher.contentHeight = $body.height();\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:JQueryEventObject):void => {\n\t\t\tResizeWatcher.apply();\n\t\t\tResizeWatcher.eventDispatcher.dispatchEvent(new ResizeWatcherEvent(ResizeWatcherEvent.RESIZE, false, false, event, ResizeWatcher.stageWidth, ResizeWatcher.stageHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getStageWidth():number { return this.stageWidth; }\n\t\tprivate static stageWidth:number = 0;\n\n\t\tpublic static getStageHeight():number { return this.stageHeight; }\n\t\tprivate static stageHeight:number = 0;\n\n\t\tpublic static getContentWidth():number { return this.contentWidth; }\n\t\tprivate static contentWidth:number = 0;\n\n\t\tpublic static getContentHeight():number { return this.contentHeight; }\n\t\tprivate static contentHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ResizeWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic RESIZE:string = \"resize\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryEventObject = null, stageWidth:number = 0, stageHeight:number = 0) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t\tthis.stageWidth = stageWidth;\n\t\t\tthis.stageHeight = stageHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ResizeWatcherEvent {\n\t\t\treturn new ResizeWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent, this.stageWidth, this.stageHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[ResizeWatcherEvent (type=\" + this.type + \" stageWidth=\" + this.stageWidth + \" stageHeight=\" + this.stageHeight + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryEventObject;\n\n\t\tpublic stageWidth:number;\n\t\tpublic stageHeight:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ScrollWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate constructor() {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[ScrollWatcher] start\");\n\n\t\t\tjQuery(window).on(\"resize\", this.windowScrollHandler);\n\t\t\tjQuery(window).on(\"scroll\", this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\ttrace(\"[ScrollWatcher] stop\");\n\n\t\t\tjQuery(window).off(\"resize\", this.windowScrollHandler);\n\t\t\tjQuery(window).off(\"scroll\", this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\tthis.windowHeight = $window.height();\n\t\t\tthis.scrollTop = $window.scrollTop();\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:ScrollWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:ScrollWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\n\n\n\n\n\t\tprivate static windowScrollHandler = (event:JQueryEventObject):void => {\n\t\t\tScrollWatcher.apply();\n\t\t\tScrollWatcher.eventDispatcher.dispatchEvent(new ScrollWatcherEvent(ScrollWatcherEvent.SCROLL, false, false, event));\n\t\t};\n\n\t\tprivate static windowResizeHandler = (event:JQueryEventObject):void => {\n\t\t\tScrollWatcher.apply();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ScrollWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = \"scroll\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryEventObject = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ScrollWatcherEvent {\n\t\t\treturn new ScrollWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[ScrollWatcherEvent (type=\" + this.type + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryEventObject;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate constructor() {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isCanceled = false;\n\n\t\t\tthis.loader = new createjs.LoadQueue();\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\n\t\t\tthis.windowImages = window[\"images\"] = window[\"images\"] || {};\n\t\t}\n\n\t\tpublic static load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\tthis.initialize();\n\t\t\tLogger.verbose(\"[AssetLoader] load\");\n\n\t\t\tthis.setListener();\n\t\t\tthis.loader.load();\n\t\t}\n\n\t\tpublic static addFile(filePath:string, id:string = null):void {\n\t\t\tthis.initialize();\n\t\t\tif (id) {\n\t\t\t\tthis.loader.loadFile({ id: id, src: filePath });\n\t\t\t} else {\n\t\t\t\tthis.loader.loadFile(filePath, false);\n\t\t\t}\n\t\t}\n\n\t\tpublic static addFiles(files:({id:string,src:string}|string)[]):void {\n\t\t\tthis.initialize();\n\t\t\tthis.loader.loadManifest(files, false);\n\t\t}\n\n\t\tpublic static addManifest(jsonPath:string):void {\n\t\t\tthis.initialize();\n\t\t\tthis.loader.loadManifest(jsonPath, false);\n\t\t}\n\n\t\tpublic static addAnimateAsset(basePath:string):void {\n\t\t\tthis.initialize();\n\t\t\tthis.loader.loadManifest(this.getAnimateManifest(basePath), false);\n\t\t}\n\n\t\tpublic static cancel():void {\n\t\t\tif (!this.isLoading) return;\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isCanceled = true;\n\n\t\t\tthis.initialize();\n\t\t\tLogger.verbose(\"[AssetLoader] cancel\");\n\n\t\t\tthis.loader.cancel();\n\t\t}\n\n\t\tpublic static close():void {\n\t\t\tif (!this.isLoading && !this.isCanceled) return;\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isCanceled = false;\n\n\t\t\tthis.initialize();\n\t\t\tLogger.verbose(\"[AssetLoader] close\");\n\n\t\t\tthis.loader.close();\n\t\t}\n\n\t\tpublic static clear():void {\n\t\t\tthis.initialize();\n\t\t\tLogger.verbose(\"[AssetLoader] clear\");\n\n\t\t\tthis.clearListener();\n\t\t\tthis.loader.destroy();\n\t\t\tthis.loader = new createjs.LoadQueue();\n\t\t}\n\n\t\tpublic static getResult(idOrPath:string):any {\n\t\t\treturn this.loader.getResult(idOrPath);\n\t\t}\n\n\n\n\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:AssetLoaderEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:AssetLoaderEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static setListener():void {\n\t\t\tthis.loader.addEventListener(\"fileload\", this.loaderFileLoadHandler);\n\t\t\tthis.loader.addEventListener(\"fileerror\", this.loaderFileErrorHandler);\n\t\t\tthis.loader.addEventListener(\"progress\", this.loaderProgressHandler);\n\t\t\tthis.loader.addEventListener(\"error\", this.loaderErrorHandler);\n\t\t\tthis.loader.addEventListener(\"complete\", this.loaderCompleteHandler);\n\t\t}\n\n\t\tprivate static clearListener():void {\n\t\t\tthis.loader.removeEventListener(\"fileload\", this.loaderFileLoadHandler);\n\t\t\tthis.loader.removeEventListener(\"fileerror\", this.loaderFileErrorHandler);\n\t\t\tthis.loader.removeEventListener(\"progress\", this.loaderProgressHandler);\n\t\t\tthis.loader.removeEventListener(\"error\", this.loaderErrorHandler);\n\t\t\tthis.loader.removeEventListener(\"complete\", this.loaderCompleteHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate static getAnimateManifest(basePath:string = \"\"):object {\n\t\t\tconst manifest:{src:string,id:string}[] = window[\"lib\"][\"properties\"][\"manifest\"];\n\t\t\tif (basePath != \"\") {\n\t\t\t\tif (basePath.substr(-1, 1) != \"/\") {\n\t\t\t\t\tbasePath = basePath + \"/\";\n\t\t\t\t}\n\t\t\t\tconst updated:{src:string,id:string}[] = [];\n\t\t\t\tconst numFiles:number = manifest.length;\n\t\t\t\tlet file:{src:string,id:string};\n\t\t\t\tfor (let i:number = 0; i < numFiles; ++i) {\n\t\t\t\t\tfile = manifest[i];\n\t\t\t\t\tupdated.push({ src: basePath + file.src, id: file.id });\n\t\t\t\t}\n\t\t\t\treturn updated;\n\t\t\t} else {\n\t\t\t\treturn manifest;\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\tprivate static loaderFileLoadHandler = (event:createjs.Event):void => {\n\t\t\tLogger.verbose(\"[AssetLoader] file load\");\n\t\t\tconst itemId:string = event.item.id;\n\t\t\tconst result:HTMLImageElement = event.result;\n\t\t\tif (itemId) AssetLoader.windowImages[itemId] = result;\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.FILE_LOAD, false, false, event.progress, event.loaded, event.total, result));\n\t\t};\n\n\t\tprivate static loaderErrorHandler = (event:createjs.ErrorEvent):void => {\n\t\t\tLogger.verbose(\"[AssetLoader] error : title = \" + event.title + \", message = \" + event.message);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.ERROR));\n\t\t};\n\n\t\tprivate static loaderProgressHandler = (event:createjs.ProgressEvent):void => {\n\t\t\tLogger.verbose(\"[AssetLoader] progress : progress = \" + event.progress, \" (\" + event.loaded + \" / \" + event.total + \")\");\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\t\tprivate static loaderFileErrorHandler = (event:createjs.Event):void => {\n\t\t\tLogger.verbose(\"[AssetLoader] file error : \" + event.error);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.FILE_ERROR, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\t\tprivate static loaderCompleteHandler = (event:createjs.Event):void => {\n\t\t\tLogger.verbose(\"[AssetLoader] complete\");\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsLoading():boolean { return this.isLoading; }\n\t\tprivate static isLoading:boolean;\n\n\t\tpublic static getIsLoaded():boolean { return this.isLoaded; }\n\t\tprivate static isLoaded:boolean;\n\n\t\tpublic static getIsCanceled():boolean { return this.isCanceled; }\n\t\tprivate static isCanceled:boolean;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t\tprivate static loader:createjs.LoadQueue;\n\t\tprivate static windowImages:alm.Hash<HTMLImageElement>;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class AssetLoaderEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic FILE_LOAD:string = \"fileload\";\n\t\tstatic FILE_ERROR:string = \"fileerror\";\n\t\tstatic PROGRESS:string = \"progress\";\n\t\tstatic COMPLETE:string = \"complete\";\n\t\tstatic ERROR:string = \"error\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.type, this.bubbles, this.cancelable, this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[AssetLoaderEvent (type=\" + this.type + \" progress=\" + this.progress + \"loadedCount=\" + this.loadedCount + \" totalCount=\" + this.totalCount + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport abstract class View<T extends createjs.DisplayObject> extends createjs.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null) {\n\t\t\tsuper();\n\t\t\tthis.view = view;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReady = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\t\t\tthis.autoHideWithInit = true;\n\t\t\tthis.name = \"\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\t\t\tthis.view = this.implInitialize();\n\t\t\tthrowError(this.name || this, \"view is null\", !this.view);\n\t\t\tthis.hide(false);\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = true;\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tif (this.isReady) return;\n\t\t\tthrowError(this.name || this, \"ready() was called without being initialized\", !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReady = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tthis.implFinalize();\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthrowError(this.name || this, \"getShowCommand() was called without being initialized\", !this.isInitialized);\n\t\t\t\t\tthrowWarn(this.name || this, \"getShowCommand() was called without being ready\", !this.isReady);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\tif (this.hideCommand) {\n\t\t\t\t\t\tthis.hideCommand.interrupt();\n\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):cmd.Command {\n\t\t\tconst command:cmd.Serial = new cmd.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthrowError(this.name || this, \"getHideCommand() was called without being initialized\", !this.isInitialized);\n\t\t\t\t\t\tthrowWarn(this.name || this, \"getHideCommand() was called without being ready\", !this.isReady);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\tthis.isHiding = true;\n\t\t\t\t\tif (this.showCommand) {\n\t\t\t\t\t\tthis.showCommand.interrupt();\n\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew cmd.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):cmd.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):cmd.Command;\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsInitializing():boolean { return this.isInitializing; }\n\t\tprivate isInitializing:boolean;\n\n\t\tpublic getIsInitialized():boolean { return this.isInitialized; }\n\t\tprivate isInitialized:boolean;\n\n\t\tpublic getIsReady():boolean { return this.isReady; }\n\t\tprivate isReady:boolean;\n\n\t\tpublic getIsShowing():boolean { return this.isShowing; }\n\t\tprivate isShowing:boolean;\n\n\t\tpublic getIsShown():boolean { return this.isShown; }\n\t\tprivate isShown:boolean;\n\n\t\tpublic getIsHiding():boolean { return this.isHiding; }\n\t\tprivate isHiding:boolean;\n\n\t\tpublic getIsHidden():boolean { return !this.isShown; }\n\n\t\tpublic getView():T { return this.view; }\n\t\tprivate view:T;\n\n\t\tpublic getAutoHideWithInit():boolean { return this.autoHideWithInit; }\n\t\tpublic setAutoHideWithInit(value:boolean):void { this.autoHideWithInit = value; }\n\t\tprivate autoHideWithInit:boolean;\n\n\t\tpublic getName():string { return this.name; }\n\t\tpublic setName(value:string):void { this.name = value; }\n\t\tprivate name:string;\n\n\t\tprivate showCommand:cmd.Command;\n\t\tprivate hideCommand:cmd.Command;\n\t}\n}"]}